import React, { useEffect, useState } from 'react';
import './profile.css';
import { getPublicKey, nip19, generatePrivateKey } from 'nostr-tools';
import Menu from '../Menu';
import DropdownComponent from '../LoginDropDownComponent/DropDownComponent';

export function generateNewKeys() {
    const pk = generatePrivateKey();

    const pubKey = getPublicKey(pk);
    const epk = nip19.nsecEncode(pk);
    const ePubKey = nip19.npubEncode(pubKey);
    return { epk: epk, epubKey: ePubKey };
}

function HeaderBar() {
    const [isScrolled, setIsScrolled] = useState(true);

    const [prevScrollY, setPrevScrollY] = useState(0);
    const scrollThreshold = 100;

    useEffect(() => {
        const handleScroll = () => {
            const scrollY = window.scrollY;
            const isScrollingUp = scrollY < prevScrollY;

            if (scrollY > scrollThreshold) {
                setIsScrolled(isScrollingUp);
            } else {
                setIsScrolled(true);
            }

            setPrevScrollY(scrollY);
        };

        window.addEventListener('scroll', handleScroll);

        return () => {
            window.removeEventListener('scroll', handleScroll);
        };
    }, [prevScrollY]);

    const headerClasses = `fixed w-full top-0 h-14 bg-white text-gray-700  border-b border-gray-200 ${
        !isScrolled
            ? 'transition-transform transform -translate-y-full ease-in-out duration-300'
            : ''
    }`;

    return (
        <div className={headerClasses}>
            <header className={'flex flex-row items-center h-14'}>
                <div className="pl-3 basis-[50%]">
                    <Menu />
                </div>
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="120"
                    height="26"
                    fill="none"
                    viewBox="0 0 80 17">
                    <path
                        fill="#000"
                        d="M10.812 8.146c-.086 0-.162.068-.226.204-.272.53-.562 1.01-.87 1.44-.301.429-.605.794-.913 1.095-.308.3-.613.533-.913.698-.301.158-.584.236-.849.236a1.63 1.63 0 01-.72-.16c-.215-.115-.45-.327-.709-.635-.25-.307-.54-.734-.87-1.278A65.447 65.447 0 013.55 7.62a.965.965 0 00-.247-.311c-.079-.072-.15-.108-.215-.108-.093 0-.18.1-.258.301-.079.193-.147.469-.204.827-.057.351-.104.777-.14 1.278a28.59 28.59 0 00-.043 1.644c0 .358.018.716.054 1.074.043.358.065.727.065 1.107 0 .129-.036.25-.108.365a.985.985 0 01-.29.28 1.344 1.344 0 01-.419.203c-.157.05-.326.075-.505.075-.358 0-.616-.214-.773-.644-.158-.43-.237-1.117-.237-2.063 0-1.196.065-2.28.194-3.254.136-.982.326-1.82.57-2.514.25-.702.543-1.243.88-1.622.344-.387.727-.58 1.15-.58.372 0 .726.215 1.063.644.344.423.712 1.11 1.106 2.063.158.387.326.748.505 1.085.186.336.37.63.548.88.186.244.365.437.537.58.172.137.326.205.462.205a.897.897 0 00.387-.086c.129-.065.272-.197.43-.398a6.56 6.56 0 00.569-.902c.222-.394.494-.92.816-1.58.172-.343.326-.63.462-.858.136-.23.272-.412.408-.548.136-.144.28-.244.43-.301a1.27 1.27 0 01.505-.097c.222 0 .44.118.655.355.215.236.423.551.623.945.208.394.409.852.602 1.375s.38 1.07.558 1.644c.187.573.366 1.156.537 1.75.18.588.351 1.146.516 1.676.043.158.072.269.086.333a.669.669 0 01-.086.58 1.187 1.187 0 01-.29.312 1.564 1.564 0 01-.419.226c-.15.057-.3.085-.451.085-.2 0-.358-.021-.473-.064a.561.561 0 01-.258-.258 3.72 3.72 0 01-.182-.515c-.086-.28-.19-.61-.312-.989a38.347 38.347 0 00-.386-1.224c-.136-.43-.276-.824-.42-1.182a7.077 7.077 0 00-.397-.902c-.129-.244-.243-.365-.343-.365zm13.997 3.502c.207-.18.411-.27.612-.27.114 0 .218.03.311.087.094.057.197.147.312.268.107.165.183.301.226.409.05.1.075.2.075.3 0 .215-.108.42-.322.613a7.74 7.74 0 01-1.118.773c-.4.222-.82.412-1.257.57a7.84 7.84 0 01-1.353.354 7.623 7.623 0 01-1.386.129 5.73 5.73 0 01-1.633-.226 4.66 4.66 0 01-1.364-.623 4.051 4.051 0 01-.999-.977 3.749 3.749 0 01-.58-1.3c-.064-.2-.125-.33-.183-.387-.05-.064-.136-.097-.257-.097-.265 0-.47-.064-.613-.193-.143-.129-.215-.315-.215-.558 0-.1.008-.165.022-.194l.021-.215c.036-.257.104-.444.204-.558.108-.115.273-.172.495-.172h.16c.302 0 .513-.14.635-.42.222-.493.504-.944.848-1.353.344-.408.73-.755 1.16-1.042.43-.293.888-.519 1.375-.676a4.727 4.727 0 011.504-.247c.53 0 1.024.078 1.483.236.465.15.87.362 1.213.634.344.272.613.59.806.956.2.365.301.759.301 1.181 0 .294-.057.563-.172.806-.114.244-.28.458-.494.645a2.666 2.666 0 01-.784.44c-.301.115-.645.19-1.031.226l-3.728.376a.565.565 0 00-.354.107.358.358 0 00-.13.29c0 .186.069.365.205.537.143.172.33.326.558.462.237.129.505.233.806.312.308.078.623.118.945.118.308 0 .623-.029.946-.086a7.244 7.244 0 001.901-.677c.3-.165.584-.35.849-.559zm-2.396-2.772a.536.536 0 00.28-.15.457.457 0 000-.612 1.065 1.065 0 00-.323-.248 1.757 1.757 0 00-.473-.182 2.434 2.434 0 00-.569-.065c-.293 0-.594.043-.902.13-.308.085-.587.2-.838.343-.25.136-.455.29-.612.462-.158.164-.237.33-.237.494 0 .165.1.247.301.247.122 0 .319-.014.59-.043.273-.029.574-.06.903-.097a55.562 55.562 0 001.88-.279zm5.575 5.586a29.72 29.72 0 00-.247-2.632 32.155 32.155 0 00-.343-2.116 27.417 27.417 0 00-.312-1.461c-.086-.372-.129-.605-.129-.698 0-.136.05-.269.15-.398.108-.129.24-.24.398-.333.157-.1.326-.179.505-.236.186-.057.354-.086.505-.086a.69.69 0 01.311.064.36.36 0 01.194.215c.035.122.068.25.096.387.036.129.072.286.108.473.043.265.1.397.171.397.08 0 .169-.118.27-.354.142-.33.296-.602.461-.817a2.17 2.17 0 01.526-.505c.194-.129.39-.218.591-.268.208-.05.423-.075.645-.075.673 0 1.242.265 1.708.794.472.53.841 1.297 1.106 2.3.036.114.068.19.097.225.029.029.06.043.096.043a.172.172 0 00.108-.043.476.476 0 00.118-.204c.172-.466.372-.86.602-1.182.229-.33.465-.594.709-.795.25-.207.505-.358.762-.45a2.18 2.18 0 01.741-.14c.437 0 .831.16 1.182.483.358.315.673.805.946 1.471.279.66.519 1.497.72 2.514.207 1.01.379 2.21.515 3.599 0 .386-.118.655-.355.806-.236.157-.558.236-.966.236-.265 0-.473-.058-.623-.172a.638.638 0 01-.258-.451 50.194 50.194 0 00-.312-2.654 20.103 20.103 0 00-.354-1.965c-.13-.538-.272-.946-.43-1.225-.15-.28-.319-.419-.505-.419-.093 0-.211.068-.354.204-.136.136-.283.387-.44.752-.158.358-.323.852-.495 1.482-.172.624-.337 1.422-.494 2.396a.868.868 0 01-.398.623c-.214.143-.48.215-.794.215-.366 0-.62-.057-.763-.172-.136-.114-.211-.308-.226-.58a15.35 15.35 0 00-.15-1.407 14.064 14.064 0 00-.58-2.525 6.786 6.786 0 00-.387-.945 2.623 2.623 0 00-.419-.634c-.143-.15-.283-.225-.419-.225-.179 0-.354.125-.526.376-.165.25-.315.605-.451 1.063-.13.458-.233 1.01-.312 1.654a17.905 17.905 0 00-.118 2.16c0 .136.003.272.01.408.008.129.011.265.011.408 0 .215-.035.39-.107.526a.742.742 0 01-.29.323 1.141 1.141 0 01-.43.16 3.134 3.134 0 01-.537.044c-.179 0-.322-.015-.43-.043a.528.528 0 01-.247-.108.388.388 0 01-.118-.204 1.437 1.437 0 01-.043-.28zm23.805-2.814c.208-.18.412-.27.612-.27.115 0 .219.03.312.087.093.057.197.147.311.268.108.165.183.301.226.409.05.1.075.2.075.3 0 .215-.107.42-.322.613a7.728 7.728 0 01-1.117.773 8.65 8.65 0 01-1.257.57 7.84 7.84 0 01-1.354.354 7.623 7.623 0 01-1.385.129c-.58 0-1.125-.075-1.633-.226a4.66 4.66 0 01-1.364-.623 4.051 4.051 0 01-1-.977 3.747 3.747 0 01-.58-1.3c-.064-.2-.125-.33-.182-.387-.05-.064-.136-.097-.258-.097-.265 0-.47-.064-.612-.193-.144-.129-.215-.315-.215-.558 0-.1.007-.165.021-.194l.022-.215c.036-.257.104-.444.204-.558.107-.115.272-.172.494-.172h.161c.3 0 .512-.14.634-.42.222-.493.505-.944.849-1.353.343-.408.73-.755 1.16-1.042a5.34 5.34 0 011.375-.676 4.728 4.728 0 011.504-.247c.53 0 1.024.078 1.482.236.465.15.87.362 1.214.634s.612.59.806.956c.2.365.3.759.3 1.181 0 .294-.057.563-.172.806-.114.244-.279.458-.494.645a2.666 2.666 0 01-.784.44c-.3.115-.644.19-1.031.226l-3.728.376a.565.565 0 00-.354.107.358.358 0 00-.129.29c0 .186.068.365.204.537.143.172.33.326.559.462.236.129.505.233.805.312.308.078.623.118.946.118.308 0 .623-.029.945-.086a7.243 7.243 0 001.901-.677c.301-.165.584-.35.849-.559zm-2.395-2.772a.536.536 0 00.279-.15.458.458 0 000-.612 1.065 1.065 0 00-.322-.248 1.757 1.757 0 00-.473-.182 2.433 2.433 0 00-.57-.065c-.293 0-.594.043-.902.13-.308.085-.587.2-.838.343-.25.136-.455.29-.612.462-.158.164-.236.33-.236.494 0 .165.1.247.3.247.122 0 .32-.014.591-.043.272-.029.573-.06.903-.097a55.562 55.562 0 001.88-.279zm7.293-4.2c.48 0 .974.064 1.483.193.508.122.974.283 1.396.484.423.193.77.411 1.042.655.272.243.408.48.408.709 0 .114-.05.243-.15.387-.1.136-.222.268-.365.397-.143.122-.3.226-.473.311a1.042 1.042 0 01-.44.119c-.172 0-.365-.072-.58-.215-.208-.143-.44-.301-.699-.473a5.453 5.453 0 00-.827-.483 2.244 2.244 0 00-.977-.215.912.912 0 00-.57.172.542.542 0 00-.214.462c0 .179.085.361.257.548.172.179.398.365.677.558.287.194.609.398.967.612.358.215.723.444 1.096.688.38.243.748.508 1.106.795.358.286.677.598.956.934.287.337.516.706.688 1.107.172.394.258.824.258 1.289 0 .401-.072.766-.215 1.096a2.41 2.41 0 01-.613.848c-.265.237-.58.42-.945.548a3.59 3.59 0 01-1.203.193c-.551 0-1.06-.085-1.526-.257a3.67 3.67 0 01-1.203-.688 3.197 3.197 0 01-.794-1.052 3.197 3.197 0 01-.28-1.343c0-.63.111-1.089.333-1.375.23-.287.587-.43 1.074-.43.301 0 .541.057.72.172.18.114.269.254.269.419a.91.91 0 01-.043.268c-.029.086-.061.18-.097.28a8.241 8.241 0 00-.086.3 1.638 1.638 0 00-.032.323c0 .186.043.365.129.537.086.172.2.322.343.451.15.136.323.243.516.322.194.079.398.118.613.118.572 0 .859-.236.859-.709 0-.372-.147-.723-.44-1.052a6.286 6.286 0 00-1.107-.978 25.081 25.081 0 00-1.44-.967 16.85 16.85 0 01-1.428-1.01 6.033 6.033 0 01-1.107-1.117 2.157 2.157 0 01-.44-1.3c0-.386.079-.74.236-1.063.165-.322.387-.598.666-.827.28-.236.605-.419.978-.548.38-.129.788-.193 1.224-.193zm6.424-3.083c0-.38.108-.645.322-.795.215-.158.57-.236 1.064-.236.179 0 .33.017.451.053a.64.64 0 01.322.172c.094.086.165.2.215.344.057.136.104.311.14.526.086.666.179 1.354.28 2.063.107.709.218 1.421.332 2.137.043.323.212.484.505.484.079 0 .208-.007.387-.022.186-.021.404-.043.655-.064a38.922 38.922 0 011.676-.161c.293-.029.57-.05.827-.065.265-.021.498-.032.698-.032a.65.65 0 01.376.097.572.572 0 01.215.236.78.78 0 01.108.322c.021.115.032.233.032.355a.947.947 0 01-.065.333.99.99 0 01-.16.311.8.8 0 01-.248.215.68.68 0 01-.344.086c-.623 0-1.253.022-1.89.065-.63.035-1.26.086-1.89.15-.323.043-.484.204-.484.483 0 .022.003.05.01.086a285.59 285.59 0 01.247 1.826c.08.545.144 1.032.194 1.461.057.423.1.777.129 1.064.036.28.053.465.053.559 0 .257-.025.472-.075.644a.91.91 0 01-.247.43.917.917 0 01-.462.236 2.79 2.79 0 01-.709.075c-.272 0-.472-.064-.601-.193-.13-.129-.2-.326-.215-.59a44.05 44.05 0 00-.204-2.547 75.99 75.99 0 00-.323-2.567c-.064-.308-.225-.462-.483-.462a.316.316 0 00-.075.01.315.315 0 01-.075.011c-.444.1-.863.2-1.257.301-.394.1-.763.208-1.106.322a4.063 4.063 0 01-.516.14 2.91 2.91 0 01-.408.032.39.39 0 01-.366-.215 1.194 1.194 0 01-.118-.558c0-.079.007-.168.022-.269.014-.107.043-.211.086-.311a.8.8 0 01.172-.29.758.758 0 01.3-.226c.301-.122.702-.247 1.203-.376a20.576 20.576 0 011.698-.376.7.7 0 00.333-.172c.086-.086.129-.211.129-.376v-.107a.406.406 0 00-.022-.129 73.113 73.113 0 00-.333-1.794c-.1-.544-.19-1.01-.268-1.396l-.172-.914a3.772 3.772 0 01-.065-.386zM76.92 5.965a1.17 1.17 0 00-.698.215c-.2.136-.373.33-.516.58a3.61 3.61 0 00-.354.87c-.094.33-.169.691-.226 1.085a13.15 13.15 0 00-.118 1.235c-.022.43-.032.863-.032 1.3 0 .573.021 1.139.064 1.697.05.552.075 1.064.075 1.536 0 .308-.114.548-.344.72-.229.18-.554.269-.977.269-.079 0-.168-.008-.269-.022a1.041 1.041 0 01-.29-.086.809.809 0 01-.236-.182.475.475 0 01-.107-.301 24.137 24.137 0 00-.28-1.934 21.108 21.108 0 00-.462-1.966 17.876 17.876 0 00-.655-1.955c-.25-.644-.54-1.274-.87-1.89a5.894 5.894 0 01-.15-.301.747.747 0 01-.054-.269c0-.107.046-.222.14-.343.1-.13.222-.247.365-.355.15-.107.311-.193.483-.258.18-.071.351-.107.516-.107.272 0 .512.19.72.57.207.372.4.97.58 1.793.035.143.064.244.086.301.021.057.05.086.085.086.08 0 .13-.122.15-.365.087-.68.234-1.264.441-1.751.208-.494.466-.899.774-1.214a2.93 2.93 0 011.074-.71c.408-.15.856-.225 1.343-.225.28 0 .562.025.848.075.287.05.545.126.774.226.229.1.415.222.558.365a.668.668 0 01.215.484c0 .129-.028.283-.086.462-.05.171-.118.34-.204.504a1.772 1.772 0 01-.3.409c-.108.107-.219.16-.334.16a.732.732 0 01-.376-.107 13.96 13.96 0 00-.397-.247 3.664 3.664 0 00-.44-.236 1.095 1.095 0 00-.516-.118z"></path>
                </svg>

                <div className={'basis-[50%] flex justify-end pr-4'}>
                    <button>
                        <DropdownComponent />
                    </button>
                </div>
            </header>
        </div>
    );
}

export default HeaderBar;
